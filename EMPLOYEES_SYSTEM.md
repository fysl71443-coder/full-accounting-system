# نظام إدارة الموظفين - دليل شامل

## 📋 نظرة عامة

تم تطوير نظام متكامل لإدارة الموظفين والموارد البشرية يشمل إدارة البيانات الشخصية، الحضور والانصراف، الرواتب، والإجازات مع واجهة مستخدم عربية احترافية.

## 🏗️ هيكل النظام

### 📊 قاعدة البيانات

#### جدول الموظفين (Employee)
```sql
- id: المعرف الفريد
- employee_id: رقم الموظف (تلقائي)
- name: الاسم الكامل
- email: البريد الإلكتروني
- phone: رقم الهاتف
- national_id: رقم الهوية الوطنية
- position: المنصب الوظيفي
- department: القسم
- hire_date: تاريخ التوظيف
- birth_date: تاريخ الميلاد
- salary: الراتب الأساسي
- address: العنوان
- emergency_contact: جهة الاتصال الطارئ
- emergency_phone: رقم الطوارئ
- status: الحالة (نشط/غير نشط/منتهي الخدمة)
- contract_type: نوع العقد
- bank_account: رقم الحساب البنكي
- iban: رقم الآيبان
- notes: ملاحظات
```

#### جدول الحضور (Attendance)
```sql
- id: المعرف الفريد
- employee_id: معرف الموظف
- date: التاريخ
- check_in: وقت الدخول
- check_out: وقت الخروج
- break_start: بداية الاستراحة
- break_end: نهاية الاستراحة
- total_hours: إجمالي الساعات
- overtime_hours: الساعات الإضافية
- status: الحالة (حاضر/غائب/متأخر/نصف يوم)
- notes: ملاحظات
```

#### جدول الرواتب (Payroll)
```sql
- id: المعرف الفريد
- employee_id: معرف الموظف
- month: الشهر
- year: السنة
- basic_salary: الراتب الأساسي
- allowances: البدلات
- overtime_pay: أجر الساعات الإضافية
- deductions: الخصومات
- tax: الضرائب
- insurance: التأمين
- net_salary: صافي الراتب
- payment_date: تاريخ الدفع
- status: الحالة
```

#### جدول الإجازات (Leave)
```sql
- id: المعرف الفريد
- employee_id: معرف الموظف
- leave_type: نوع الإجازة
- start_date: تاريخ البداية
- end_date: تاريخ النهاية
- days_count: عدد الأيام
- reason: السبب
- status: الحالة (معلقة/موافق عليها/مرفوضة)
- approved_by: موافق من قبل
- approved_date: تاريخ الموافقة
```

## 🎯 الوظائف الرئيسية

### 1. إدارة الموظفين

#### ✅ إضافة موظف جديد (`/add_employee`)
- **المعلومات الشخصية**:
  - الاسم الكامل (مطلوب)
  - رقم الهوية الوطنية (10 أرقام)
  - تاريخ الميلاد
  - العنوان السكني

- **معلومات الاتصال**:
  - البريد الإلكتروني
  - رقم الهاتف (10 أرقام)
  - جهة الاتصال الطارئ
  - رقم هاتف الطوارئ

- **معلومات الوظيفة**:
  - المنصب الوظيفي (مطلوب)
  - القسم (مطلوب)
  - تاريخ التوظيف (مطلوب)
  - نوع العقد (دوام كامل/جزئي/مؤقت)
  - الراتب الأساسي

- **المعلومات المصرفية**:
  - رقم الحساب البنكي
  - رقم الآيبان (24 رقم)

#### ✅ عرض قائمة الموظفين (`/employees`)
- **الإحصائيات**:
  - إجمالي الموظفين
  - الموظفين النشطين
  - الموظفين الجدد هذا الشهر
  - إجمالي الرواتب الشهرية

- **الرسوم البيانية**:
  - توزيع الموظفين حسب الأقسام
  - أعياد الميلاد القادمة

- **البحث والتصفية**:
  - البحث بالاسم أو رقم الموظف
  - تصفية حسب القسم
  - تصفية حسب الحالة
  - تصفية حسب نوع العقد

- **الإجراءات**:
  - عرض الملف الشخصي
  - تسجيل حضور
  - إدارة الراتب
  - تعديل البيانات
  - حذف الموظف

### 2. إدارة الحضور والانصراف

#### ✅ تسجيل حضور (`/add_attendance`)
- **معلومات الموظف**:
  - اختيار الموظف من القائمة
  - عرض معلومات الموظف (المنصب، القسم)
  - تاريخ الحضور

- **أوقات الحضور**:
  - وقت الدخول
  - وقت الخروج
  - بداية ونهاية الاستراحة
  - حساب تلقائي للساعات

- **حالة الحضور**:
  - حاضر
  - غائب
  - متأخر
  - نصف يوم

- **الحساب التلقائي**:
  - إجمالي ساعات العمل
  - الساعات الإضافية (أكثر من 8 ساعات)
  - خصم وقت الاستراحة

#### ✅ عرض سجل الحضور (`/attendance`)
- **الإحصائيات اليومية**:
  - عدد الحاضرين اليوم
  - عدد المتأخرين
  - عدد الغائبين
  - إجمالي الساعات الإضافية

- **التسجيل السريع**:
  - تسجيل حضور فوري
  - عرض الوقت الحالي
  - إجراءات سريعة (دخول/خروج/استراحة)

- **البحث والتصفية**:
  - البحث بالموظف
  - تصفية حسب التاريخ
  - تصفية حسب الحالة
  - تصفية حسب القسم

### 3. المميزات التقنية

#### 🔧 وظائف النماذج المتقدمة
- **تتبع التغييرات**: مراقبة فورية لجميع التعديلات
- **الحفظ الذكي**: مع التحقق من البيانات ودعم AJAX
- **التراجع الكامل**: استرداد البيانات الأصلية
- **الحفظ التلقائي**: كل 30 ثانية في التخزين المحلي
- **اختصارات المفاتيح**: Ctrl+S للحفظ، Ctrl+Z للتراجع

#### 🎨 واجهة المستخدم
- **تصميم عربي**: دعم كامل للغة العربية مع RTL
- **تصميم متجاوب**: يعمل على جميع الأجهزة
- **رسوم بيانية**: Chart.js للإحصائيات
- **إشعارات ذكية**: تنبيهات بصرية للعمليات
- **ألوان دلالية**: نظام ألوان واضح للحالات

#### 📊 التقارير والتصدير
- **تصدير CSV**: مع دعم UTF-8 للعربية
- **طباعة محسنة**: تنسيق خاص للطباعة
- **إحصائيات متقدمة**: رسوم بيانية تفاعلية
- **تقارير مخصصة**: حسب الفترة والقسم

## 🚀 الاستخدام

### إضافة موظف جديد
1. انتقل إلى `/employees`
2. انقر "إضافة موظف جديد"
3. املأ البيانات المطلوبة
4. احفظ النموذج

### تسجيل حضور
1. انتقل إلى `/attendance`
2. انقر "تسجيل حضور"
3. اختر الموظف والتاريخ
4. أدخل أوقات الدخول والخروج
5. احفظ السجل

### عرض التقارير
1. استخدم فلاتر البحث
2. انقر "تصدير" للحصول على ملف CSV
3. انقر "طباعة" للطباعة المباشرة

## 📈 الإحصائيات والمؤشرات

### مؤشرات الأداء الرئيسية (KPIs)
- **معدل الحضور**: نسبة الحضور اليومي
- **الساعات الإضافية**: إجمالي الساعات الإضافية
- **معدل التأخير**: نسبة التأخير الشهري
- **توزيع الأقسام**: عدد الموظفين في كل قسم

### التقارير المتاحة
- **تقرير الحضور اليومي**: حضور جميع الموظفين
- **تقرير الحضور الشهري**: إحصائيات شاملة
- **تقرير الساعات الإضافية**: تفاصيل الساعات الإضافية
- **تقرير الموظفين**: قائمة شاملة بالبيانات

## 🔒 الأمان والحماية

### حماية البيانات
- **تشفير البيانات المحلية**: في localStorage
- **التحقق من صحة البيانات**: قبل الحفظ
- **حماية من فقدان البيانات**: تحذيرات وحفظ تلقائي
- **تسجيل العمليات**: تتبع جميع التغييرات

### التحقق من البيانات
- **الحقول المطلوبة**: تحقق من الحقول الأساسية
- **تنسيق البيانات**: تحقق من صحة التنسيق
- **القيود المنطقية**: مثل عدم تجاوز ساعات العمل
- **التحقق المتقاطع**: بين الحقول المترابطة

## 🛠️ التطوير والصيانة

### الملفات الرئيسية
```
├── database.py          # نماذج قاعدة البيانات
├── app.py              # المسارات والمنطق
├── templates/
│   ├── employees.html      # صفحة إدارة الموظفين
│   ├── add_employee.html   # صفحة إضافة موظف
│   ├── attendance.html     # صفحة إدارة الحضور
│   └── add_attendance.html # صفحة تسجيل حضور
├── static/
│   ├── js/forms.js        # وظائف النماذج
│   └── css/forms.css      # تنسيقات النماذج
```

### إضافة وظائف جديدة
1. **إضافة حقول جديدة**: تحديث نماذج قاعدة البيانات
2. **إضافة صفحات جديدة**: إنشاء قوالب HTML
3. **إضافة مسارات جديدة**: تحديث app.py
4. **إضافة تحقق جديد**: تحديث JavaScript

### الاختبار
- **اختبار الوظائف**: جميع العمليات الأساسية
- **اختبار الواجهة**: على مختلف الأجهزة
- **اختبار الأداء**: سرعة الاستجابة
- **اختبار الأمان**: حماية البيانات

## 📋 قائمة المهام المستقبلية

### المرحلة القادمة
- [ ] إدارة الرواتب الكاملة
- [ ] نظام الإجازات
- [ ] تقارير متقدمة
- [ ] إشعارات تلقائية
- [ ] تطبيق جوال

### تحسينات مقترحة
- [ ] تكامل مع أنظمة خارجية
- [ ] ذكاء اصطناعي للتنبؤات
- [ ] نظام الموافقات الإلكترونية
- [ ] تقييم الأداء
- [ ] إدارة التدريب

## 🎯 الخلاصة

تم تطوير نظام شامل لإدارة الموظفين يتضمن:

### ✅ المكتمل
- **إدارة الموظفين**: إضافة وعرض وتعديل
- **إدارة الحضور**: تسجيل ومتابعة الحضور
- **واجهة عربية**: تصميم احترافي متجاوب
- **وظائف متقدمة**: حفظ تلقائي وتراجع
- **تقارير وتصدير**: CSV وطباعة

### 🔄 قيد التطوير
- **إدارة الرواتب**: حساب وصرف الرواتب
- **نظام الإجازات**: طلب وموافقة الإجازات
- **تقارير متقدمة**: تحليلات وإحصائيات
- **إشعارات**: تنبيهات تلقائية

النظام جاهز للاستخدام الإنتاجي مع إمكانيات توسع مستقبلية واسعة.

---

**تم التطوير بواسطة**: فريق تطوير نظام المحاسبة المتكامل  
**تاريخ آخر تحديث**: 2024-01-15  
**الإصدار**: 3.0.0
